'use client'

import { Layout, ScatterData } from 'plotly.js'
import { Plot } from './Plot'

const range = [
  0, 1.01010101, 2.02020202, 3.03030303, 4.04040404, 5.05050505, 6.06060606,
  7.07070707, 8.08080808, 9.09090909, 10.1010101, 11.11111111, 12.12121212,
  13.13131313, 14.14141414, 15.15151515, 16.16161616, 17.17171717, 18.18181818,
  19.19191919, 20.2020202, 21.21212121, 22.22222222, 23.23232323, 24.24242424,
  25.25252525, 26.26262626, 27.27272727, 28.28282828, 29.29292929, 30.3030303,
  31.31313131, 32.32323232, 33.33333333, 34.34343434, 35.35353535, 36.36363636,
  37.37373737, 38.38383838, 39.39393939, 40.4040404, 41.41414141, 42.42424242,
  43.43434343, 44.44444444, 45.45454545, 46.46464646, 47.47474747, 48.48484848,
  49.49494949, 50.50505051, 51.51515152, 52.52525253, 53.53535354, 54.54545455,
  55.55555556, 56.56565657, 57.57575758, 58.58585859, 59.5959596, 60.60606061,
  61.61616162, 62.62626263, 63.63636364, 64.64646465, 65.65656566, 66.66666667,
  67.67676768, 68.68686869, 69.6969697, 70.70707071, 71.71717172, 72.72727273,
  73.73737374, 74.74747475, 75.75757576, 76.76767677, 77.77777778, 78.78787879,
  79.7979798, 80.80808081, 81.81818182, 82.82828283, 83.83838384, 84.84848485,
  85.85858586, 86.86868687, 87.87878788, 88.88888889, 89.8989899, 90.90909091,
  91.91919192, 92.92929293, 93.93939394, 94.94949495, 95.95959596, 96.96969697,
  97.97979798, 98.98989899, 100,
]
const percentile = [
  0.16146466, 0.18035323, 0.20125993, 0.22437664, 0.24991074, 0.27808602,
  0.30914365, 0.3433432, 0.38096363, 0.42230433, 0.46768615, 0.51745244,
  0.57197011, 0.63163066, 0.69685122, 0.76807553, 0.84577498, 0.93044953,
  1.02262866, 1.12287224, 1.23177138, 1.34994924, 1.47806183, 1.61679875,
  1.76688399, 1.92907677, 2.10417242, 2.29300361, 2.49644169, 2.71539868,
  2.95082972, 3.20373664, 3.47517253, 3.76624811, 4.07814004, 4.41210188,
  4.76947819, 5.15172251, 5.56041979, 5.99731393, 6.46434108, 6.96366883,
  7.49774177, 8.06933283, 8.68159987, 9.33814597, 10.0430813, 10.80108348,
  11.61745238, 12.49815421, 13.44984904, 14.47989469, 15.59631977, 16.80775808,
  18.1233371, 19.55251414, 21.10485533, 22.78975486, 24.61609528, 26.59185315,
  28.72365884, 31.01632397, 33.47235446, 36.0914717, 38.87016776, 41.80132305,
  44.87391574, 48.07285102, 51.37893551, 54.76901669, 58.21629999, 61.69084737,
  65.16025066, 68.59046254, 71.9467569, 75.19478081, 78.30165226, 81.23705228,
  83.97425759, 86.49106073, 88.7705292, 90.80156255, 92.57921716, 94.10478093,
  95.38559408, 96.43462659, 97.26983604, 97.91334158, 98.39045893, 98.72864739,
  98.95642283, 99.10228961, 99.19374052, 99.25636714, 99.31311393, 99.38369908,
  99.4842144, 99.62690568, 99.82012544, 100.06844164,
]

const trace1 = {
  x: range,
  y: percentile,
  marker: {
    color: '#71717a',
  },
  showlegend: false,
  hoverinfo: 'skip',
  type: 'scatter',
} satisfies Partial<ScatterData>

const scoreTraces = [
  {
    x: [86.67],
    y: [97.12],
    name: 'Group A',
    marker: {
      color: '#3730a3',
      size: 12,
    },
    hoverinfo: 'text',
    hovertext: ['Score: 86.7<br>Percentile: 97th'],
    mode: 'markers',
    type: 'scatter',
  },
  {
    x: [79.58],
    y: [85.97],
    name: 'Group B',
    marker: {
      color: '#18181b',
      size: 12,
    },
    hoverinfo: 'text',
    hovertext: ['Score: 79.6<br>Percentile: 86th'],
    mode: 'markers',
    type: 'scatter',
  },
] satisfies Partial<ScatterData>[]

const data = [trace1, ...scoreTraces]

const layout = {
  title: 'SUS score percentile',
  modebar: { orientation: 'v' },
  yaxis: {
    title: 'Percentile',
    fixedrange: true,
  },
  xaxis: {
    title: 'Score',
  },
} satisfies Partial<Layout>

export function SusCurvePlot() {
  return <Plot data={data} layout={layout} />
}
